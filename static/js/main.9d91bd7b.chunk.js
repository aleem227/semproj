(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{234:function(e,a,t){e.exports=t(261)},242:function(e,a,t){},247:function(e,a){},248:function(e,a){},256:function(e,a){},257:function(e,a){},258:function(e,a){},259:function(e,a){},260:function(e,a,t){},261:function(e,a,t){"use strict";t.r(a);var l=t(11),n=t.n(l),c=t(210),r=t.n(c),s=(t(242),t(135));t(260);var m=function(){const e=Object(l.useRef)(null),a=Object(l.useRef)(null),[t,c]=Object(l.useState)(null),[r,m]=Object(l.useState)({age:null,gender:null}),[i,o]=Object(l.useState)(!1),[d,u]=Object(l.useState)(!1),[E,g]=Object(l.useState)(!1),[p,v]=Object(l.useState)(null),[h,N]=Object(l.useState)(null),[y,b]=Object(l.useState)(null),[f,w]=Object(l.useState)(null),[x,j]=Object(l.useState)(null);Object(l.useEffect)(()=>{if(!y)return;let e=!0,a=!1;return g(!0),(async()=>{const l=performance.now(),n=`/model/${y}/model.json`;let r=null,m=null;try{r=await s.b(n)}catch(i){m=i}if(r){if(t)try{t.dispose()}catch(i){console.error("Error disposing previous model:",i)}e&&!a?(c(r),w((performance.now()-l).toFixed(2)),g(!1)):r.dispose()}else g(!1),console.error(`Error loading ${y} model:`,m),alert(`Failed to load model: ${m.message}`)})(),()=>{e=!1,a=!0}},[y]);const S=e=>{b(e.target.value),m({age:null,gender:null}),N(null)},O=async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Your browser does not support webcam access");const t=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:640,height:480}});e.current&&(e.current.srcObject=t,e.current.play(),u(!0),e.current.onloadedmetadata=(()=>{e.current.readyState>=2&&u(!0)}))}catch(a){console.error("Error accessing webcam:",a),u(!1),alert(`Camera error: ${a.message}`)}},M=()=>{e.current&&e.current.srcObject&&(e.current.srcObject.getTracks().forEach(e=>e.stop()),e.current.srcObject=null,u(!1))};Object(l.useEffect)(()=>(O(),()=>{M()}),[]);const F=async e=>{o(!0);const a=performance.now();try{if(!t)throw new Error("Model is not loaded yet");const n=e.getContext("2d").getImageData(0,0,e.width,e.height);let c=s.a.fromPixels(n).resizeBilinear([224,224]).toFloat().div(s.c(255));const r=s.d([.485,.456,.406]),i=s.d([.229,.224,.225]);c=(c=c.sub(r).div(i)).expandDims(0);const d=await t.predict(c),u=await d[0].dataSync(),E=await d[1].dataSync(),g=performance.now();N((g-a).toFixed(2)),c.dispose(),d.forEach(e=>e.dispose()),m({age:Math.round(u[0])-("resnet34"===y?5:8),gender:E[0]>.5?"Female":"Male"})}catch(l){console.error("Error processing image:",l),alert(`Error processing image: ${l.message}`),k()}finally{o(!1)}},k=async()=>{v(null),m({age:null,gender:null}),N(null),await O()};return n.a.createElement(n.a.Fragment,null,E&&n.a.createElement("div",{className:"model-loading-overlay"},n.a.createElement("div",{className:"model-loading-spinner"}),n.a.createElement("div",{className:"model-loading-text"},"Loading model...")),n.a.createElement("div",{className:"app-container"},n.a.createElement("div",{className:"project-introduction"},n.a.createElement("div",{className:"project-title"},"Machine Learning - Semester Project"),n.a.createElement("div",{className:"authors"},n.a.createElement("ul",null,n.a.createElement("li",null,"Muhammad Aleem Shakeel")))),n.a.createElement("div",{className:"header"},n.a.createElement("h1",null,"Age & Gender Predictor")),n.a.createElement("div",{className:"model-selection"},n.a.createElement("h3",null,"Select Model"),n.a.createElement("div",{className:"model-options"},n.a.createElement("label",{className:`model-option ${"resnet34"===y?"selected":""}`},n.a.createElement("input",{type:"radio",name:"model",value:"resnet34",checked:"resnet34"===y,onChange:S,disabled:i||E}),n.a.createElement("div",{className:"model-details"},n.a.createElement("h4",null,"ResNet-34"),n.a.createElement("p",{className:"model-description"},"Lightweight model with good latency and accuracy tradeoff"),n.a.createElement("div",{className:"model-specs"},n.a.createElement("span",{className:"spec-item"},n.a.createElement("span",{role:"img","aria-label":"Fast"},"\u26a1")," Fast inference"),n.a.createElement("span",{className:"spec-item"},n.a.createElement("span",{role:"img","aria-label":"Balanced"},"\u2713")," Balanced accuracy"),n.a.createElement("span",{className:"spec-item"},n.a.createElement("span",{role:"img","aria-label":"Mobile"},"\ud83d\udcf1")," Mobile-friendly")))),n.a.createElement("label",{className:`model-option ${"resnet152"===y?"selected":""}`},n.a.createElement("input",{type:"radio",name:"model",value:"resnet152",checked:"resnet152"===y,onChange:S,disabled:i||E}),n.a.createElement("div",{className:"model-details"},n.a.createElement("h4",null,"ResNet-152"),n.a.createElement("p",{className:"model-description"},"State-of-the-art model with high accuracy"),n.a.createElement("div",{className:"model-specs"},n.a.createElement("span",{className:"spec-item"},n.a.createElement("span",{role:"img","aria-label":"Accurate"},"\ud83c\udfaf")," Superior accuracy"),n.a.createElement("span",{className:"spec-item"},n.a.createElement("span",{role:"img","aria-label":"Slower"},"\u23f1\ufe0f")," Higher latency"),n.a.createElement("span",{className:"spec-item"},n.a.createElement("span",{role:"img","aria-label":"Desktop"},"\ud83d\udcbb")," Better for desktop")))))),n.a.createElement("div",{className:"main-content"},n.a.createElement("div",{className:"video-section"},n.a.createElement("div",{className:`video-container ${d?"camera-active":""}`},p?n.a.createElement("img",{src:p,alt:"Captured",className:"captured-image"}):n.a.createElement("video",{ref:e,autoPlay:!0,playsInline:!0,muted:!0}),n.a.createElement("div",{className:"video-overlay"},!p&&d&&n.a.createElement("svg",{className:"frame-lines",viewBox:"0 0 100 100",preserveAspectRatio:"none"},n.a.createElement("line",{x1:"30",y1:"0",x2:"30",y2:"10"}),n.a.createElement("line",{x1:"0",y1:"30",x2:"10",y2:"30"}),n.a.createElement("line",{x1:"70",y1:"0",x2:"70",y2:"10"}),n.a.createElement("line",{x1:"90",y1:"30",x2:"100",y2:"30"}),n.a.createElement("line",{x1:"30",y1:"90",x2:"30",y2:"100"}),n.a.createElement("line",{x1:"0",y1:"70",x2:"10",y2:"70"}),n.a.createElement("line",{x1:"70",y1:"90",x2:"70",y2:"100"}),n.a.createElement("line",{x1:"90",y1:"70",x2:"100",y2:"70"}))),n.a.createElement("canvas",{ref:a,style:{display:"none"}})),n.a.createElement("div",{className:"camera-controls"},p?n.a.createElement("button",{className:"secondary-button",onClick:k,disabled:i},"Take New Photo"):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"camera-toggle-container"},n.a.createElement("input",{type:"checkbox",id:"camera-toggle",className:"camera-toggle-checkbox",checked:d,onChange:d?M:O,disabled:i}),n.a.createElement("label",{htmlFor:"camera-toggle",className:"camera-toggle-label",title:d?"Turn camera off":"Turn camera on"},n.a.createElement("div",{className:"camera-toggle-inner"},n.a.createElement("div",{className:"camera-toggle-switch"},n.a.createElement("svg",{className:"camera-icon",viewBox:"0 0 24 24"},n.a.createElement("path",{d:"M18 10.48V6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-4.48l4 3.98v-11l-4 3.98zm-2-.79V18H4V6h12v3.69z"})),n.a.createElement("svg",{className:"camera-off-icon",viewBox:"0 0 24 24"},n.a.createElement("path",{d:"M18 10.48V6c0-1.1-.9-2-2-2H8.83l2 2H16v3.17l1.83 1.83L18 10.48zm2.5-.48L15.17 4H12c-1.1 0-2 .9-2 2h-4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c.34 0 .65-.09.93-.24L20.5 10zM2.1 4.93L4 6.83V14c0 1.1.9 2 2 2h8.17l1.73 1.73c-.28.15-.59.24-.93.24H6c-1.1 0-2-.9-2-2V8.83L1.9 6.73 2.1 4.93z"}),n.a.createElement("path",{d:"M3.55 2.44L2.1 3.89l18 18 1.45-1.45z"})))),n.a.createElement("span",{className:"toggle-status"},d?"Camera On":"Camera Off"))),n.a.createElement("button",{className:"primary-button",onClick:()=>{if(!e.current||!a.current)return;if(!t)return void alert("Model is not loaded yet. Please wait.");const l=e.current,n=a.current,c=n.getContext("2d");n.width=l.videoWidth,n.height=l.videoHeight,c.drawImage(l,0,0,n.width,n.height);const r=n.toDataURL("image/jpeg");v(r),F(n)},disabled:!d||i||E||!t||!y},"Capture Image")))),n.a.createElement("div",{className:"results-section"},n.a.createElement("div",{className:"results-card"},n.a.createElement("h2",null,"Analysis Results"),i?n.a.createElement("div",{className:"loading-container"},n.a.createElement("div",{className:"loading-spinner"}),n.a.createElement("p",null,"Analyzing image with ",y,"...")):null!==r.age?n.a.createElement("div",{className:"prediction-results"},n.a.createElement("div",{className:"result-item"},n.a.createElement("div",{className:"result-label"},"Age"),n.a.createElement("div",{className:"result-value"},r.age," years")),n.a.createElement("div",{className:"result-item"},n.a.createElement("div",{className:"result-label"},"Gender"),n.a.createElement("div",{className:"result-value"},r.gender)),n.a.createElement("div",{className:"performance-metrics"},n.a.createElement("div",{className:"result-item"},n.a.createElement("div",{className:"result-label"},"Model Load Time"),n.a.createElement("div",{className:"result-value"},f," ms")),h&&n.a.createElement("div",{className:"result-item"},n.a.createElement("div",{className:"result-label"},"Processing Time"),n.a.createElement("div",{className:"result-value"},h," ms"))),n.a.createElement("div",{className:"model-info"},"Using ","resnet34"===y?"ResNet-34":"ResNet-152"," model")):n.a.createElement("div",{className:"empty-results"},n.a.createElement("p",null,"Please select a model to begin."))),n.a.createElement("div",{className:"info-card"},n.a.createElement("h3",null,"How it works"),n.a.createElement("p",null,"This app uses a TensorFlow.js model running directly in your browser to predict age and gender from facial images."),n.a.createElement("p",null,"For best results:"),n.a.createElement("ul",null,n.a.createElement("li",null,"Ensure good lighting"),n.a.createElement("li",null,"Face the camera directly"),n.a.createElement("li",null,"Remove hats or sunglasses")))))))};var i=e=>{e&&e instanceof Function&&t.e(3).then(t.bind(null,262)).then(a=>{let{getCLS:t,getFID:l,getFCP:n,getLCP:c,getTTFB:r}=a;t(e),l(e),n(e),c(e),r(e)})};r.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(m,null))),i()}},[[234,1,2]]]);
//# sourceMappingURL=main.9d91bd7b.chunk.js.map